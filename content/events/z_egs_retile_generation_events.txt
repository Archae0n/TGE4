namespace = egs_retile_generate
# New Modifiers
country_event = {
	id = egs_retile_generate.4
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		
		every_planet = {
			limit = {
				solar_system = {
					egs_select_all_relevant_systems = yes
				}
			}
		
			# Cracked Minerals
			if = {
				limit = { 
					is_planet_class = pc_shattered
					NOT = { has_deposit = d_minerals_10 }
				}
				add_deposit = d_minerals_10
			}
			
			# Shielded Society
			if = {
				limit = { 
					is_planet_class = pc_shielded
					NOT = { has_deposit = d_society_8 }
				}
				add_deposit = d_society_8
			}
			
			# Ring Modifier
			if = {
				limit = { 
					has_ring = yes
					NOT = { has_modifier = ring_system }
				}
				add_modifier = { modifier = ring_system days = -1 }
			}
			
			# Moon Modifier
			if = {
				limit = { 
					has_moon = yes
					NOT = { has_planet_flag = has_megastructure }
				}
				if = {
					limit = { num_moons = 1 }
					if = { 
						limit = { NOT = { has_modifier = pm_moon } }
						add_modifier = { modifier = pm_moon days = -1 }
					}
				} else_if = {
					limit = { num_moons = 2 }
					if = { 
						limit = { NOT = { has_modifier = pm_twin_moons } }
						add_modifier = { modifier = pm_twin_moons days = -1 }
					}
				} else_if = {
					limit = { num_moons = 3 }
					if = { 
						limit = { NOT = { has_modifier = pm_triple_moons } }
						add_modifier = { modifier = pm_triple_moons days = -1 }
					}
				} else_if = {
					limit = { num_moons > 3 }
					if = {
						limit = { NOT = { has_modifier = extensive_moon_system } }
						add_modifier = { modifier = extensive_moon_system days = -1 }
					}
				}
			}
			
			# Sun Modifier
			if = {
				limit = { 
					is_star = no
					is_star_class = sc_b
					NOT = { has_modifier = pm_class_b }
				}
				add_modifier = { modifier = pm_class_b days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_a
					NOT = { has_modifier = pm_class_a }
				}
				add_modifier = { modifier = pm_class_a days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_f
					NOT = { has_modifier = pm_class_f }
				}
				add_modifier = { modifier = pm_class_f days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_g
					NOT = { has_modifier = pm_class_g }
				}
				add_modifier = { modifier = pm_class_g days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_k
					NOT = { has_modifier = pm_class_k }
				}
				add_modifier = { modifier = pm_class_k days = -1 }
			} else_if = {
				limit = {
					is_star = no
					is_star_class = sc_m
					NOT = { has_modifier = pm_class_m }
				}
				add_modifier = { modifier = pm_class_m days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_m_giant
					NOT = { has_modifier = pm_class_m_giant }
				}
				add_modifier = { modifier = pm_class_m_giant days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_t
					NOT = { has_modifier = pm_class_t }
				}
				add_modifier = { modifier = pm_class_t days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_black_hole
					NOT = { has_modifier = pm_class_black_hole }
				}
				add_modifier = { modifier = pm_class_black_hole days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_neutron_star
					NOT = { has_modifier = pm_class_neutron_star }
				}
				add_modifier = { modifier = pm_class_neutron_star days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_pulsar
					NOT = { has_modifier = pm_class_pulsar }
				}
				add_modifier = { modifier = pm_class_pulsar days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_1
					NOT = { has_modifier = pm_class_binary_1 }
				}
				add_modifier = { modifier = pm_class_binary_1 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_2
					NOT = { has_modifier = pm_class_binary_2 }
				}
				add_modifier = { modifier = pm_class_binary_2 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_3
					NOT = { has_modifier = pm_class_binary_3 }
				}
				add_modifier = { modifier = pm_class_binary_3 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_4
					NOT = { has_modifier = pm_class_binary_4 }
				}
				add_modifier = { modifier = pm_class_binary_4 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_5
					NOT = { has_modifier = pm_class_binary_5 }
				}
				add_modifier = { modifier = pm_class_binary_5 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_6
					NOT = { has_modifier = pm_class_binary_6 }
				}
				add_modifier = { modifier = pm_class_binary_6 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_7
					NOT = { has_modifier = pm_class_binary_7 }
				}
				add_modifier = { modifier = pm_class_binary_7 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_8
					NOT = { has_modifier = pm_class_binary_8 }
				}
				add_modifier = { modifier = pm_class_binary_8 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_9
					NOT = { has_modifier = pm_class_binary_9 }
				}
				add_modifier = { modifier = pm_class_binary_9 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_binary_10
					NOT = { has_modifier = pm_class_binary_10 }
				}
				add_modifier = { modifier = pm_class_binary_10 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_trinary_1
					NOT = { has_modifier = pm_class_trinary_1 }
				}
				add_modifier = { modifier = pm_class_trinary_1 days = -1 }
			} else_if = {
				limit = {
					is_star = no
					is_star_class = sc_trinary_2
					NOT = { has_modifier = pm_class_trinary_2 }
				}
				add_modifier = { modifier = pm_class_trinary_2 days = -1 }
			} else_if = {
				limit = {
					is_star = no
					is_star_class = sc_trinary_3
					NOT = { has_modifier = pm_class_trinary_3 }
				}
				add_modifier = { modifier = pm_class_trinary_3 days = -1 }
			} else_if = {
				limit = { 
					is_star = no
					is_star_class = sc_trinary_4
					NOT = { has_modifier = pm_class_trinary_4 }
				}
				add_modifier = { modifier = pm_class_trinary_4 days = -1 }
			}
		}
	}
}